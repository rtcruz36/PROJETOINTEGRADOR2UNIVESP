<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Assistente de Estudos - Planejador Semanal</title>
    <link rel="stylesheet" href="styles/dashboard.css" />
    <link rel="stylesheet" href="styles/planner.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
        rel="stylesheet"
    />
</head>
<body data-api-base="http://localhost:8000/api">
    <div class="app-shell">
        <header class="app-header">
            <div class="logo-area">
                <div class="logo">PI2</div>
                <div class="header-text">
                    <h1>Assistente de Estudos</h1>
                    <p>Planeje a sua semana com blocos inteligentes</p>
                </div>
            </div>
            <div class="user-actions">
                <a class="ghost-button ghost-button--small" href="index.html">Dashboard</a>
                <a class="ghost-button ghost-button--small" href="quizzes.html">Central de quizzes</a>
                <a class="ghost-button ghost-button--small" href="schedule.html">Cronograma IA</a>
                <a class="ghost-button ghost-button--small" href="study.html">Modo foco</a>
                <a class="ghost-button ghost-button--small" href="study-log.html">Registro de estudo</a>
                <a class="ghost-button ghost-button--small" href="analytics.html">Analytics</a>
                <span id="user-greeting" class="user-greeting">Olá!</span>
                <button id="logout-button" class="ghost-button" type="button">Sair</button>
            </div>
        </header>

        <main class="planner-main">
            <section class="panel planner-header" aria-label="Resumo semanal">
                <div>
                    <span class="panel-subtitle">Planejamento Semanal</span>
                    <h2 id="planner-week-range">Semana atual</h2>
                    <p id="planner-summary" class="planner-summary-text"></p>
                </div>
                <div class="planner-header-actions">
                    <button id="refresh-planner" class="ghost-button ghost-button--small" type="button">
                        Atualizar
                    </button>
                    <button id="open-create-plan" class="primary-button" type="button">
                        Adicionar plano
                    </button>
                </div>
            </section>

            <section class="panel planner-calendar" aria-label="Calendário semanal">
                <div id="planner-week-grid" class="planner-week-grid" aria-live="polite"></div>
                <p id="planner-empty-state" class="planner-empty" hidden>
                    Você ainda não tem planos para esta semana. Adicione um plano para começar.
                </p>
                <p id="planner-feedback" class="planner-feedback" role="status"></p>
            </section>

            <section class="panel planner-legend" aria-label="Cursos planejados">
                <header>
                    <h2>Cursos na semana</h2>
                </header>
                <ul id="planner-course-legend" class="planner-course-legend" aria-live="polite"></ul>
            </section>
        </main>
    </div>

    <div id="login-overlay" class="login-overlay" role="dialog" aria-modal="true">
        <form id="login-form" class="login-card">
            <h2>Entrar</h2>
            <p>Acesse sua conta para visualizar o planejador semanal.</p>
            <label for="email">E-mail</label>
            <input
                id="email"
                name="email"
                type="email"
                required
                autocomplete="email"
                placeholder="seu-email@exemplo.com"
            />
            <label for="password">Senha</label>
            <input
                id="password"
                name="password"
                type="password"
                required
                autocomplete="current-password"
                placeholder="••••••••"
            />
            <button type="submit" class="primary-button">Entrar</button>
            <p id="login-error" class="form-error" role="alert"></p>
        </form>
    </div>

    <div id="plan-modal" class="planner-modal" role="dialog" aria-modal="true" hidden>
        <div class="planner-modal__content">
            <header class="planner-modal__header">
                <h2 id="plan-modal-title">Editar plano</h2>
                <button id="close-plan-modal" class="ghost-button ghost-button--small" type="button" aria-label="Fechar">
                    Fechar
                </button>
            </header>
            <form id="plan-form" class="planner-form">
                <input type="hidden" id="plan-id" name="plan_id" />
                <label class="planner-field" for="plan-course">
                    <span>Curso</span>
                    <select id="plan-course" name="course" required></select>
                </label>
                <label class="planner-field" for="plan-day">
                    <span>Dia da semana</span>
                    <select id="plan-day" name="day_of_week" required></select>
                </label>
                <label class="planner-field" for="plan-minutes">
                    <span>Minutos planejados</span>
                    <input id="plan-minutes" name="minutes_planned" type="number" min="10" max="600" required />
                </label>
                <p id="plan-form-error" class="form-error" role="alert"></p>
                <div class="planner-form__actions">
                    <button id="delete-plan-button" class="ghost-button ghost-button--danger" type="button">
                        Remover plano
                    </button>
                    <div class="planner-form__actions-right">
                        <button id="cancel-plan-button" class="ghost-button ghost-button--small" type="button">
                            Cancelar
                        </button>
                        <button id="submit-plan-button" class="primary-button" type="submit">
                            Salvar
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <template id="planner-day-template">
        <article class="planner-day" data-day="">
            <header class="planner-day__header">
                <div>
                    <h3 class="planner-day__title"></h3>
                    <p class="planner-day__date"></p>
                </div>
                <div class="planner-day__meta">
                    <span class="planner-day__minutes" aria-live="polite"></span>
                    <button class="ghost-button ghost-button--small planner-day__add" type="button">
                        + Plano
                    </button>
                </div>
            </header>
            <div class="planner-day__dropzone" role="list"></div>
        </article>
    </template>

    <template id="planner-card-template">
        <div class="planner-card" draggable="true" role="listitem">
            <span class="planner-card__color" aria-hidden="true"></span>
            <div class="planner-card__body">
                <strong class="planner-card__course"></strong>
                <span class="planner-card__minutes"></span>
            </div>
            <button class="ghost-button ghost-button--tiny planner-card__edit" type="button" aria-label="Editar plano">
                ✏️
            </button>
        </div>
    </template>

    <script src="js/planner.js" type="module"></script>
</body>
</html>
